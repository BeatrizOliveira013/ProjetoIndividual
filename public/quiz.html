<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz de Hogwarts</title>
    <link rel="stylesheet" href="./css/quiz.css">
    <link rel="icon" href="./assets/icon/icons8-harry-potter-60.png" />
</head>
<body>
   <!--header inicio -->
   <div class="header">

    <div class="container">
        <h1 class="titulo">Harry Potter Fanpage</h1>

        <ul class="navbar">
            <li >
                <a href="#">Home</a>
            </li>
            <li>
                <a href="./sobremim.html">About me</a>
            </li>
            <li class="agora">
                <a href="./quiz.html">Quiz</a>
            </li>

        </ul>

        <ul class="navbar">
            <li>
                <a href="./login.html">Login</a>
            </li>
            <li>
                <a href="./register.html">Register</a>
            </li>
        </ul>

    </div>
</div>

    <section class="quiz">
        <div class="quiz-container">
            <h1>Descubra sua casa em Hogwarts!</h1>
            <form id="quiz-form">
                <!-- As perguntas e respostas serão inseridas aqui via JavaScript -->
            </form>
            <button id="submit-btn" class="btn">Enviar</button>
        </div>
    </section>

    <!-- Modal de resultado -->
    <div id="result-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <p id="result-text"></p>
        </div>
    </div>

    <!--footer inicio-->
    <div class="footer">
        <div class="container">
            <h4> &hearts; Harry Potter Fanpage &copy; 2023</h4>
            <span class="version">v1.0.0</span>
        </div>
    </div>
    <!--footer fim-->

    <script src="script.js"></script>
</body>
</html>

    <script>
const quizData = [
    {
        question: "Qual é a sua cor favorita?",
        answers: {
            a: "Vermelho",
            b: "Azul",
            c: "Amarelo",
            d: "Verde"
        },
        house: {
            a: "Grifinória",
            b: "Corvinal",
            c: "Lufa-Lufa",
            d: "Sonserina"
        }
    },
    {
        question: "Qual dessas qualidades você mais valoriza?",
        answers: {
            a: "Coragem",
            b: "Sabedoria",
            c: "Lealdade",
            d: "Ambição"
        },
        house: {
            a: "Grifinória",
            b: "Corvinal",
            c: "Lufa-Lufa",
            d: "Sonserina"
        }
    },
    {
        question: "Qual é o seu hobby favorito?",
        answers: {
            a: "Praticar esportes",
            b: "Ler livros",
            c: "Ajudar os amigos",
            d: "Planejar o futuro"
        },
        house: {
            a: "Grifinória",
            b: "Corvinal",
            c: "Lufa-Lufa",
            d: "Sonserina"
        }
    },
    {
        question: "Como você se descreve?",
        answers: {
            a: "Corajoso",
            b: "Inteligente",
            c: "Trabalhador",
            d: "Astuto"
        },
        house: {
            a: "Grifinória",
            b: "Corvinal",
            c: "Lufa-Lufa",
            d: "Sonserina"
        }
    },
    {
        question: "Qual profissão mais combina com você?",
        answers: {
            a: "Bombeiro(a)",
            b: "Cientista",
            c: "Enfermeiro",
            d: "Empresário"
        },
        house: {
            a: "Grifinória",
            b: "Corvinal",
            c: "Lufa-Lufa",
            d: "Sonserina"
        }
    },
    {
        question: "Qual animal você escolheria como seu companheiro?",
        answers: {
            a: "Cão",
            b: "Coruja",
            c: "Coelho",
            d: "Cobra"
        },
        house: {
            a: "Grifinória",
            b: "Corvinal",
            c: "Lufa-Lufa",
            d: "Sonserina"
        }
    }
];

document.addEventListener("DOMContentLoaded", () => {
    const quizForm = document.getElementById('quiz-form');

    quizData.forEach((item, index) => {
        const questionDiv = document.createElement('div');
        questionDiv.classList.add('question'); 


        const questionTitle = document.createElement('h3');
        questionTitle.innerText = item.question;
        questionDiv.appendChild(questionTitle);

        for (let [key, value] of Object.entries(item.answers)) {
            const label = document.createElement('label');
            const radioInput = document.createElement('input');
            radioInput.type = 'radio';
            radioInput.name = `question${index}`;
            radioInput.value = key;

            label.appendChild(radioInput);
            label.appendChild(document.createTextNode(value));
            questionDiv.appendChild(label);
        }

        quizForm.appendChild(questionDiv);
    });
});

document.getElementById('submit-btn').addEventListener('click', () => {
    const answers = Array.from(document.querySelectorAll('input[type="radio"]:checked'));

    if (answers.length !== quizData.length) {
        alert("Por favor, responda todas as perguntas.");
        return;
    }

    const houseScores = {
        'Grifinória': 0,
        'Corvinal': 0,
        'Lufa-Lufa': 0,
        'Sonserina': 0
    };

    

    answers.forEach((answer, index) => {
        const selectedHouse = quizData[index].house[answer.value];
        houseScores[selectedHouse]++;
    });

    const resultHouse = Object.keys(houseScores).reduce((a, b) => houseScores[a] > houseScores[b] ? a : b);

    // Enviar resultado para a API
    fetch('http://localhost:8080/results/save', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ house: resultHouse })
    }).then(response => response.json())
      .then(data => {
          console.log('Success:', data);
          // Mostrar o modal com o resultado
          const modal = document.getElementById("result-modal");
          const resultText = document.getElementById("result-text");
          resultText.innerText = `Você pertence à casa: ${resultHouse}`;
          modal.style.display = "block";
      })
      .catch((error) => {
          console.error('Error:', error);
      });
});

document.querySelector(".close-btn").addEventListener('click', () => {
    document.getElementById("result-modal").style.display = "none";
});

window.addEventListener('click', (event) => {
    const modal = document.getElementById("result-modal");
    if (event.target == modal) {
        modal.style.display = "none";
    }
});


    </script>